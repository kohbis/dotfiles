---
description: "Setup AI Context Management System for sharing project guidelines across Claude Code, GitHub Copilot, and Cursor."
---

# AI Context Management System Setup

This command sets up a system to manage and synchronize project context (rules and guidelines) across multiple AI coding assistance tools (Claude Code, GitHub Copilot, Cursor).

## System Overview

### Design Philosophy

- **Centralized Common Rules**: Manage all-tool-common context in `.ai-context/base.md`
- **Tool-Specific Extensions**: Manage tool-specific additional rules in `.ai-context/overrides/*.md`
- **Script-Based Synchronization**: Automatic generation via Node.js (ES Modules)
- **Manual Execution**: Sync when needed with `npm run ai-context:sync` command

### Generated File Structure

```txt
Project Root/
├── .ai-context/                     # New directory
│   ├── base.md                      # Common context
│   ├── config.json                  # Sync configuration
│   ├── overrides/                   # Tool-specific additional content
│   │   ├── claude.md                # Claude Code specific
│   │   ├── copilot.md               # GitHub Copilot specific
│   │   └── cursor.md                # Cursor specific
│   └── backups/                     # Auto-backups (.gitignore recommended)
│
├── scripts/                         # New directory
│   └── sync-ai-context.js           # Sync script
│
├── CLAUDE.md                        # Auto-generated (with warning comment)
├── .github/
│   └── copilot-instructions.md      # Auto-generated (with warning comment)
└── .cursor/
    └── rules/
        └── instructions.mdc         # Auto-generated (integrated file)
```

## Setup Instructions

Follow these steps to set up the AI context management system in your project:

### 1. Create Directory Structure

```bash
mkdir -p .ai-context/overrides scripts
```

### 2. Place Configuration File (config.json)

Create `.ai-context/config.json` with the following content:

```json
{
  "version": "1.0.0",
  "base": {
    "file": "base.md"
  },
  "tools": {
    "claude": {
      "enabled": true,
      "outputPath": "../CLAUDE.md",
      "overrideFile": "overrides/claude.md",
      "header": "# CLAUDE.md - Project Guidelines\n\nThis document provides guidelines to support project development.\nWhen working with Claude Code, please adhere to these rules and assumptions.\n",
      "footer": "\n---\n\n**Follow these guidelines to support consistent, high-quality development.**\n",
      "autoGeneratedNotice": "<!-- This file is auto-generated from .ai-context/ -->\n<!-- To make changes, edit .ai-context/base.md or .ai-context/overrides/claude.md and run npm run ai-context:sync -->\n\n"
    },
    "copilot": {
      "enabled": true,
      "outputPath": "../.github/copilot-instructions.md",
      "overrideFile": "overrides/copilot.md",
      "header": "# GitHub Copilot Instructions\n\nThis file provides GitHub Copilot guidelines to support project development.\n",
      "footer": "\nFollow these guidelines to generate consistent, high-quality code.\n",
      "autoGeneratedNotice": "<!-- This file is auto-generated from .ai-context/ -->\n<!-- To make changes, edit .ai-context/base.md or .ai-context/overrides/copilot.md and run npm run ai-context:sync -->\n\n"
    },
    "cursor": {
      "enabled": true,
      "outputPath": "../.cursor/rules/instructions.mdc",
      "overrideFile": "overrides/cursor.md",
      "header": "# Cursor Instructions\n\nGuidelines to support project development.\n",
      "footer": "\ndescription: Project coding guidelines\nglobs:\nalwaysApply: true\n---\n",
      "autoGeneratedNotice": "<!-- This file is auto-generated from .ai-context/ -->\n<!-- To make changes, edit .ai-context/base.md or .ai-context/overrides/cursor.md and run npm run ai-context:sync -->\n\n"
    }
  },
  "sync": {
    "backupBeforeSync": true,
    "backupDir": "backups"
  }
}
```

### 3. Place Sync Script

Copy the sync script from template and grant execution permissions:

```bash
cp ~/.claude/commands/templates/ai-context/sync-ai-context.js scripts/
chmod +x scripts/sync-ai-context.js
```

### 4. Create Base Context (base.md)

Write project-common rules and guidelines in `.ai-context/base.md`.

Template example:

```bash
cp ~/.claude/commands/templates/ai-context/base.md .ai-context/
```

**Recommended content for base.md**:

- Project overview (purpose, tech stack, architecture)
- Coding conventions and style guide
- Directory structure and file naming conventions
- Dependency and library usage policies
- Prohibitions and precautions
- Development commands and workflows

### 5. Create Override Files

Create tool-specific additional rules in `.ai-context/overrides/`:

```bash
# Claude Code specific
cp ~/.claude/commands/templates/ai-context/override-claude.md .ai-context/overrides/claude.md

# GitHub Copilot specific
cp ~/.claude/commands/templates/ai-context/override-copilot.md .ai-context/overrides/copilot.md

# Cursor specific
cp ~/.claude/commands/templates/ai-context/override-cursor.md .ai-context/overrides/cursor.md
```

Customize each file to match your project.

### 6. Configure Sync Command

#### Option A: For Node.js Projects (with package.json)

Add the following to the `scripts` section of `package.json`:

```json
{
  "scripts": {
    "ai-context:sync": "node scripts/sync-ai-context.js"
  }
}
```

Then run with:

```bash
npm run ai-context:sync
```

#### Option B: For Non-Node.js Projects (direct execution)

If your project doesn't have a `package.json`, run the sync script directly:

```bash
# Run from project root
node scripts/sync-ai-context.js
```

Note: The sync script reads `config.json` relative to the `.ai-context/` directory in your current working directory, so always run from the project root.

### 7. Update .gitignore (Recommended)

Add to `.gitignore` to exclude backup files:

```txt
# AI context backups
.ai-context/backups/
```

### 8. Run Initial Sync

After setup is complete, run the initial sync:

```bash
# For Node.js projects
npm run ai-context:sync

# For non-Node.js projects (direct execution)
node scripts/sync-ai-context.js
```

Verify that three files are successfully generated:

- `CLAUDE.md`
- `.github/copilot-instructions.md`
- `.cursor/rules/instructions.mdc`

## Operational Flow

### Update Common Rules

1. Edit `.ai-context/base.md`
2. Run sync command:
   - Node.js project: `npm run ai-context:sync`
   - Non-Node.js project: `node scripts/sync-ai-context.js`
3. Review all generated files
4. Git commit & push

### Update Tool-Specific Rules

1. Edit `.ai-context/overrides/[tool-name].md`
2. Run sync command:
   - Node.js project: `npm run ai-context:sync`
   - Non-Node.js project: `node scripts/sync-ai-context.js`
3. Review only the relevant tool's file
4. Git commit & push

### Add New Tool

1. Create `.ai-context/overrides/[new-tool].md`
2. Add configuration to `tools` section in `.ai-context/config.json`
3. Run sync command:
   - Node.js project: `npm run ai-context:sync`
   - Non-Node.js project: `node scripts/sync-ai-context.js`
4. Review newly generated file
5. Git commit & push

## Troubleshooting

### Error: config.json not found

- Verify `.ai-context/config.json` is created correctly
- Ensure current directory is project root

### Error: base.md not found

- Create `.ai-context/base.md`
- From template: `cp ~/.claude/commands/templates/ai-context/base.md .ai-context/`

### Warning: overrides/*.md not found

- This is a warning; sync continues
- Tool files are generated from base.md only
- You can add overrides later if needed

## How the System Works

This system operates as follows:

1. **base.md**: Defines all-tool-common context (project rules)
2. **overrides/*.md**: Defines tool-specific additional rules and customizations
3. **config.json**: Manages sync settings (headers, footers, output paths)
4. **sync-ai-context.js**: Concatenates base + override to generate each tool's file
5. **Auto-backup**: Backs up existing files with timestamp before sync

Generated files include "auto-generated, manual editing prohibited" warning comments.

## Benefits

- ✅ Edit one place (base.md) to reflect across all AI tools
- ✅ Tool-specific optimizations possible (overrides)
- ✅ Safe sync with backup functionality
- ✅ Extensibility: Easy to add new AI tools
- ✅ Version control: History management with Git

---

With these steps, the AI context management system is established.
After setup, you can easily sync with:
- Node.js project: `npm run ai-context:sync`
- Non-Node.js project: `node scripts/sync-ai-context.js`
